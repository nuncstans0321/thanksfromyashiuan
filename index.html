<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ÊÑüË¨ùÂç° - ASCII Ëá™ÂãïÈÅ©Êáâ</title>
<style>
:root{--bg:#fff8ec;--ink:#2b2b2b;--paper:#fffef9;--heart:#ff7aa2;}
*{box-sizing:border-box} html,body{height:100%} body{margin:0;background:radial-gradient(1200px 800px at 20% 20%,#fffaf0,var(--bg));color:var(--ink);font-family:ui-rounded,'Noto Sans TC',system-ui,-apple-system,Arial;display:flex;align-items:center;justify-content:center;overflow:hidden}
.stage{position:relative;width:min(960px,94vw);height:min(640px,92vh);}
.env-wrap{position:absolute;inset:0;display:grid;place-items:center;transition:opacity .6s,transform .6s;}
.envelope{position:relative;width:360px;height:230px;cursor:pointer;transform-origin:50% 70%;animation:floaty 2.8s ease-in-out infinite;}
.env-body{position:absolute;inset:0;background:#fff;border-radius:14px;box-shadow:0 16px 50px rgba(0,0,0,.12),0 3px 8px rgba(0,0,0,.06);}
.env-flap{position:absolute;left:0;right:0;top:0;height:62%;background:linear-gradient(#ffe27a,#ffd24d);clip-path:polygon(0 0,100% 0,50% 100%);transform-origin:50% 0;border-top-left-radius:14px;border-top-right-radius:14px;transition:transform .8s cubic-bezier(.2,.9,.2,1.2);}
.heart{position:absolute;left:50%;top:58%;width:44px;height:44px;transform:translate(-50%,-50%) rotate(45deg);}
.heart::before,.heart::after{content:'';position:absolute;inset:0;background:var(--heart);border-radius:10px}
.heart::before{width:50%;left:0;}.heart::after{height:50%;top:-50%;left:0;width:100%;border-radius:50%;}
@keyframes floaty{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
.card{position:absolute;inset:0;display:grid;place-items:center;opacity:0;pointer-events:none;transform:translateY(10px) scale(.98);transition:opacity .7s,transform .7s;}
.card.show{opacity:1;pointer-events:auto;transform:translateY(0) scale(1);}
.paper{width:min(900px,94vw);height:min(600px,90vh);background:var(--paper);border-radius:20px;box-shadow:0 18px 60px rgba(0,0,0,.12),0 4px 16px rgba(0,0,0,.06);position:relative;overflow:hidden;}
.pages{position:absolute;inset:0;}
.page{position:absolute;inset:0;padding:36px clamp(16px,4vw,56px);opacity:0;transform:translateY(10px);transition:opacity .45s,transform .45s;overflow:auto;}
.page.active{opacity:1;transform:translateY(0);}
.center{display:grid;place-items:center;text-align:center;height:100%}
.ascii-wrap{position:relative;width:100%;height:60vh;border-radius:12px;background:#fffdf6;box-shadow:inset 0 0 0 1px #f3edd7;overflow:hidden}
.ascii-plate{position:absolute;left:12px;top:12px;transform-origin:top left}
pre.ascii{margin:0;white-space:pre;line-height:1.06;font-family:ui-monospace, Menlo, Consolas, 'Noto Sans Mono CJK TC', monospace;font-size:14px;display:inline-block}
.pika-note{position:absolute;top:14px;left:18px;color:#b08b00;font-weight:700;letter-spacing:.5px;opacity:.95}
.pika-note::after{content:' \266A'}
.grid4{display:grid;grid-template-columns:repeat(2,minmax(180px,1fr));gap:18px;margin-top:6px;}
.badge{position:relative;display:grid;place-items:center;background:#fffdf3;border:1px solid #f0e6c6;border-radius:18px;padding:14px;cursor:pointer;user-select:none}
.badge img{width:170px;height:170px;object-fit:contain;display:block}
.btns{position:absolute;right:16px;bottom:16px;display:flex;gap:10px;flex-wrap:wrap}
button{appearance:none;border:none;padding:.7rem 1rem;border-radius:12px;font-weight:600;cursor:pointer;background:#111;color:#fff;box-shadow:0 6px 20px rgba(0,0,0,.15);}
button.ghost{background:#ffe27a;color:#3b2a00}
.popup{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.38);z-index:9999}
.popup.show{display:flex}
.popup-card{background:#fff;color:#222;padding:24px;border-radius:16px;box-shadow:0 16px 44px rgba(0,0,0,.28);max-width:min(92vw,720px);width:min(92vw,720px);text-align:center;font-size:clamp(18px,2.6vw,24px);line-height:1.6;}
.popup button{margin-top:14px;background:#111;color:#fff;border:none;padding:.7rem 1.1rem;border-radius:12px;cursor:pointer;font-weight:700}
.toast{position:fixed;background:rgba(0,0,0,.76);color:#fff;padding:.45rem .7rem;border-radius:10px;transform:translate(-50%,-120%);pointer-events:none;z-index:10000;font-size:14px;white-space:nowrap;opacity:0;animation:to 1200ms ease forwards}
@keyframes to{0%{opacity:0;transform:translate(-50%,-80%)}15%{opacity:1}85%{opacity:1}100%{opacity:0;transform:translate(-50%,-140%)}}
.confetti{position:absolute;inset:0;pointer-events:none;overflow:hidden}
.piece{position:absolute;width:10px;height:16px;opacity:0;animation:confetti 1600ms ease forwards}
@keyframes confetti{0%{transform:translate(var(--sx), -20px) rotate(0deg); opacity:0;} 10%{opacity:1;} 100%{ transform:translate(var(--ex), 100vh) rotate(720deg); opacity:0;}}
.finalmsg{position:fixed;left:0;right:0;bottom:10vh;text-align:center;font-size:clamp(18px,2.8vw,28px);color:#222;opacity:0;transform:translateY(10px);transition:opacity .8s, transform .8s;pointer-events:none}
.finalmsg.show{opacity:1;transform:translateY(0)}
.zap{display:inline-block;animation:zap 1400ms ease-in-out infinite;opacity:.9}
.zap:nth-child(2){animation-delay:.25s} .zap:nth-child(3){animation-delay:.5s}
@keyframes zap{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}
</style>
</head>
<body>
<div class="stage">
  <div class="env-wrap" id="envIntro"><div class="envelope" id="envBtn" role="button" tabindex="0" aria-label="ÈñãÂïü"><div class="env-body"></div><div class="env-flap"></div><div class="heart"></div></div></div>
  <div class="card" id="card"><div class="paper">
    <div class="pages">
      <section class="page center active" id="pg1">
        <div class="ascii-wrap" id="asciiWrap"><div class="ascii-plate" id="asciiPlate"><pre class="ascii" id="ascii">Loading‚Ä¶</pre></div></div>
        <div class="pika-note">pika~pika</div>
      </section>
      <section class="page" id="pg2">
        <div class="grid4">
          <div class="badge" data-msg="Â∑•‰ΩúËæõËã¶‰∫ÜÔºåÂä†Ê≤π üí™‚ú®"><img id="opt1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNjAgMTYwIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwIiB5MT0iMCIgeDI9IjEiIHkyPSIxIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmVmOWEiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmQyNGQiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iMTYwIiBoZWlnaHQ9IjE2MCIgcng9IjI2IiBmaWxsPSIjZmZmZGYzIiBzdHJva2U9IiNmMGU2YzYiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MCwxOCkiPjxyZWN0IHg9IjMwIiB5PSIwIiB3aWR0aD0iMjAiIGhlaWdodD0iMTgiIHJ4PSI2IiBmaWxsPSIjYzhiMjdhIi8+PHJlY3QgeD0iOCIgeT0iMTYiIHdpZHRoPSI4NCIgaGVpZ2h0PSIxMTAiIHJ4PSIxOCIgZmlsbD0idXJsKCNnKSIgc3Ryb2tlPSIjYmRhMzVjIiBzdHJva2Utd2lkdGg9IjMiLz48cmVjdCB4PSIxOCIgeT0iMjgiIHdpZHRoPSI2NCIgaGVpZ2h0PSIxMCIgcng9IjQiIGZpbGw9IiNmZmYyYjgiIG9wYWNpdHk9Ii44Ii8+PHBhdGggZD0iTTU0IDU2IEw0MiA4NCBoMTYgbC0xMCAyOCAyNC0zNGgtMTR6IiBmaWxsPSIjZmY5YjAwIiBzdHJva2U9IiM4YTRmMDAiIHN0cm9rZS13aWR0aD0iMiIvPjwvZz48L3N2Zz4=" alt="ËÉΩÈáèÁì∂"></div>
          <div class="badge" data-msg="Â∑•‰Ωú‰∏ÄÂàáÈ†ÜÂà©ÔΩû üåà"><img id="opt2" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNjAgMTYwIj48cmVjdCB3aWR0aD0iMTYwIiBoZWlnaHQ9IjE2MCIgcng9IjI2IiBmaWxsPSIjZmZmZGYzIiBzdHJva2U9IiNmMGU2YzYiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNiwyMikiPjxjaXJjbGUgY3g9IjY0IiBjeT0iNDgiIHI9IjI4IiBmaWxsPSIjZmZkMjRkIiBzdHJva2U9IiNlMGI2NDAiIHN0cm9rZS13aWR0aD0iMyIvPjxnIGZpbGw9IiNmZmQyNGQiPjxyZWN0IHg9IjYyIiB5PSI4IiB3aWR0aD0iNCIgaGVpZ2h0PSIxMiIgcng9IjIiLz48cmVjdCB4PSI2MiIgeT0iNzYiIHdpZHRoPSI0IiBoZWlnaHQ9IjEyIiByeD0iMiIvPjxyZWN0IHg9IjI2IiB5PSI0NiIgd2lkdGg9IjEyIiBoZWlnaHQ9IjQiIHJ4PSIyIi8+PHJlY3QgeD0iOTAiIHk9IjQ2IiB3aWR0aD0iMTIiIGhlaWdodD0iNCIgcng9IjIiLz48cmVjdCB4PSI4NCIgeT0iMjQiIHdpZHRoPSI0IiBoZWlnaHQ9IjEyIiByeD0iMiIgdHJhbnNmb3JtPSJyb3RhdGUoNDUgODYgMzApIi8+PHJlY3QgeD0iODQiIHk9IjYwIiB3aWR0aD0iNCIgaGVpZ2h0PSIxMiIgcng9IjIiIHRyYW5zZm9ybT0icm90YXRlKC00NSA4NiA2NikiLz48cmVjdCB4PSI0MCIgeT0iMjQiIHdpZHRoPSI0IiBoZWlnaHQ9IjEyIiByeD0iMiIgdHJhbnNmb3JtPSJyb3RhdGUoLTQ1IDQyIDMwKSIvPjxyZWN0IHg9IjQwIiB5PSI2MCIgd2lkdGg9IjQiIGhlaWdodD0iMTIiIHJ4PSIyIiB0cmFuc2Zvcm09InJvdGF0ZSg0NSA0MiA2NikiLz48L2c+PHBhdGggZD0iTTE4IDk2IGEyMCAxNiAwIDAgMSAxOC0xMiBoNTIgYTIwIDE2IDAgMSAxIDAgMzIgSDM4IGEyMCAxNiAwIDAgMSAtMjAtMjAgeiIgZmlsbD0iI2U3ZjJmZiIgc3Ryb2tlPSIjYzhkZWY4IiBzdHJva2Utd2lkdGg9IjMiLz48Y2lyY2xlIGN4PSI2MCIgY3k9IjQ4IiByPSI0IiBmaWxsPSIjMzMzIi8+PGNpcmNsZSBjeD0iNzYiIGN5PSI0OCIgcj0iNCIgZmlsbD0iIzMzMyIvPjxwYXRoIGQ9Ik02MCA1NiBxOCA4IDE2IDAiIHN0cm9rZT0iIzMzMyIgc3Ryb2tlLXdpZHRoPSIzIiBmaWxsPSJub25lIi8+PC9nPjwvc3ZnPg==" alt="Â•ΩÂ§©Ê∞£"></div>
          <div class="badge" data-msg="Â∏åÊúõ‰ªäÂ§©Ê≤íÊúâÁ™ÅÁôºÁãÄÊ≥ÅÔºåÊòØÈ†ÜÂøÉÂ•ΩÊó•Â≠êÔºÅüçÄ"><img id="opt3" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNjAgMTYwIj48cmVjdCB3aWR0aD0iMTYwIiBoZWlnaHQ9IjE2MCIgcng9IjI2IiBmaWxsPSIjZmZmZGYzIiBzdHJva2U9IiNmMGU2YzYiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMCwxNikiPjxwYXRoIGQ9Ik00OCAxMTYgbDEyIDEyIDEyLTEyIDgtMzJINDB6IiBmaWxsPSIjZmZjMGNiIiBzdHJva2U9IiNlNjhhYTEiIHN0cm9rZS13aWR0aD0iMyIvPjxnPjxjaXJjbGUgY3g9IjYwIiBjeT0iMzYiIHI9IjE2IiBmaWxsPSIjZmZiM2M3IiBzdHJva2U9IiNkZTdmYTAiIHN0cm9rZS13aWR0aD0iMyIvPjxjaXJjbGUgY3g9Ijg2IiBjeT0iNDIiIHI9IjE0IiBmaWxsPSIjZmZkNmE1IiBzdHJva2U9IiNlM2ExNjUiIHN0cm9rZS13aWR0aD0iMyIvPjxjaXJjbGUgY3g9IjQwIiBjeT0iNDgiIHI9IjEzIiBmaWxsPSIjYjFmMGRjIiBzdHJva2U9IiM3YmQwYjkiIHN0cm9rZS13aWR0aD0iMyIvPjxjaXJjbGUgY3g9IjcyIiBjeT0iMjIiIHI9IjEwIiBmaWxsPSIjYzNkMmZmIiBzdHJva2U9IiM5NmE3ZTYiIHN0cm9rZS13aWR0aD0iMyIvPjxjaXJjbGUgY3g9IjQ4IiBjeT0iNjYiIHI9IjEyIiBmaWxsPSIjZmNhNWE1IiBzdHJva2U9IiNlMDZhNmEiIHN0cm9rZS13aWR0aD0iMyIvPjwvZz48cGF0aCBkPSJNNjAgNjggTDYwIDEyMCIgc3Ryb2tlPSIjNmRiNjZkIiBzdHJva2Utd2lkdGg9IjYiLz48L2c+PC9zdmc+" alt="Ëä±Êùü"></div>
          <div class="badge" data-msg="Âëà‰∏äÁúüÂøÉÁöÑËê¨ÂàÜÊÑüË¨ù ‚ú®‚≠êÔ∏è‚ù§Ô∏è"><img id="opt4" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNjAgMTYwIj48cmVjdCB3aWR0aD0iMTYwIiBoZWlnaHQ9IjE2MCIgcng9IjI2IiBmaWxsPSIjZmZmZGYzIiBzdHJva2U9IiNmMGU2YzYiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxOCwyMCkiPjxyZWN0IHg9IjgiIHk9IjQ4IiB3aWR0aD0iMTE2IiBoZWlnaHQ9IjcyIiByeD0iMTIiIGZpbGw9IiNmZmQyNGQiIHN0cm9rZT0iI2UwYjY0MCIgc3Ryb2tlLXdpZHRoPSIzIi8+PHJlY3QgeD0iOCIgeT0iMzYiIHdpZHRoPSIxMTYiIGhlaWdodD0iMjAiIHJ4PSI2IiBmaWxsPSIjZmZiODRkIiBzdHJva2U9IiNlMDliMmYiIHN0cm9rZS13aWR0aD0iMyIvPjxyZWN0IHg9IjU2IiB5PSIzNiIgd2lkdGg9IjIwIiBoZWlnaHQ9Ijg0IiByeD0iOCIgZmlsbD0iI2ZmN2FhMiIvPjxwYXRoIGQ9Ik01NiAzNiBjLTE4LTEyLTI4LTEwLTMyIDAgOCAxMCAxNiAxMCAzMiAweiIgZmlsbD0iI2ZmN2FhMiIvPjxwYXRoIGQ9Ik03NiAzNiBjMTgtMTIgMjgtMTAgMzIgMCAtOCAxMC0xNiAxMC0zMiAweiIgZmlsbD0iI2ZmN2FhMiIvPjwvZz48L3N2Zz4=" alt="Á¶ÆÁâ©"></div>
        </div>
      </section>
    </div>
    <div class="btns">
      <button id="prev">‰∏ä‰∏ÄÈ†Å</button>
      <button class="ghost" id="next">‰∏ã‰∏ÄÈ†Å</button>
    </div>
    <div class="confetti" id="confetti"></div>
  </div></div>
</div>
<div class="popup" id="popup"><div class="popup-card"><div id="popupText"></div><button id="popupOk">pika~</button></div></div>
<div class="finalmsg" id="finalMsg">È°òÊÇ®Êúâ‰∏ÄÂÄãÈñÉ‰∫ÆÈñÉ‰∫ÆÁöÑ‰∏ÄÂ§©ÔΩû ‚ú®‚ú® <span class="zap">‚ö°Ô∏è</span><span class="zap">‚ö°Ô∏è</span><span class="zap">‚ö°Ô∏è</span></div>
<script>
(function(){
  const envWrap=document.getElementById('envIntro'),envBtn=document.getElementById('envBtn'),flap=envBtn.querySelector('.env-flap'),card=document.getElementById('card'),finalMsg=document.getElementById('finalMsg');
  envBtn.onclick=()=>openCard(); envBtn.onkeydown=(e)=>{if(e.key==='Enter'||e.key===' ')openCard();};
  function openCard(){flap.style.transform='rotateX(175deg)';envWrap.style.opacity='0';envWrap.style.transform='translateY(-10px) scale(.98)';setTimeout(()=>{envWrap.style.display='none';card.classList.add('show');fireConfetti(60);},500);}

  const pages=[...document.querySelectorAll('.page')];let idx=0;const next=document.getElementById('next'),prev=document.getElementById('prev');
  function show(i){pages[idx].classList.remove('active');idx=Math.max(0,Math.min(pages.length-1,i));pages[idx].classList.add('active');next.textContent = (idx===pages.length-1)?'ÂÆåÊàê':'‰∏ã‰∏ÄÈ†Å';}
  show(0); prev.onclick=()=>show(idx-1); next.onclick=()=>{ if(idx===pages.length-1) closeFlow(); else show(idx+1); };

  function closeFlow(){ card.classList.remove('show'); envWrap.style.display='grid';
    setTimeout(()=>{ envWrap.style.opacity='1'; envWrap.style.transform='none'; flap.style.transform='rotateX(0deg)';
      setTimeout(()=>{ finalMsg.classList.add('show'); setTimeout(()=>finalMsg.classList.remove('show'), 10000); }, 500);
    }, 20);
    fireConfetti(140);
  }

  const asciiEl=document.getElementById('ascii'), plate=document.getElementById('asciiPlate'), wrap=document.getElementById('asciiWrap');
  fetch('ascii_frames.txt').then(r=>r.ok?r.text():Promise.reject()).then(t=>playFrames(t.split(/\n\s*===FRAME===\s*\n/gm))).catch(()=>playFrames([
`  (\\__/)
  ( ^_^)  ‚òÜ
  / >‚ö°`,
`  (\\__/)
  ( o_o)   ‚ö°
  /  > ‚ö°`,
`  (\\__/)
  ( ^_^)  ‚òÜ
  / >  ‚ö°`
  ]));
  function playFrames(frames){let i=0;function step(){asciiEl.textContent=frames[i++%frames.length]; fit();} step(); setInterval(step, 260);}
  function fit(){
    plate.style.transform='scale(1)';
    const r=plate.getBoundingClientRect(), rw=wrap.clientWidth-24, rh=wrap.clientHeight-24;
    const sx = Math.min(rw/Math.max(r.width,1), rh/Math.max(r.height,1), 1);
    plate.style.transform = "scale(" + sx + ")";
  }
  window.addEventListener('resize', fit);

  const popup=document.getElementById('popup'),popupText=document.getElementById('popupText'),popupOk=document.getElementById('popupOk');
  function showModal(t){popupText.textContent=t;popup.classList.add('show');popupOk.focus();}
  popupOk.onclick=()=>popup.classList.remove('show'); popup.onclick=e=>{if(e.target===popup)popup.classList.remove('show');};
  function toast(x,y,text){const t=document.createElement('div');t.className='toast';t.textContent=text;t.style.left=x+'px';t.style.top=y+'px';document.body.appendChild(t);setTimeout(()=>t.remove(),1300);}

  document.querySelectorAll('.badge').forEach(b=>{
    const handler=(e)=>{ const t=b.dataset.msg||''; showModal(t); const r=b.getBoundingClientRect(); toast(r.left+r.width/2, r.top+10+scrollY, t); };
    b.addEventListener('click', handler);
    b.addEventListener('keydown', e=>{ if(e.key==='Enter'||e.key===' ') handler(e); });
  });

  // fallback-safe overrides
  const exts=['png','jpg','jpeg','webp','svg'];
  function tryOverride(imgId, base){
    const el=document.getElementById(imgId);
    let i=0;
    function attempt(){
      if(i>=exts.length) return;
      const test = new Image();
      const url = base + '.' + exts[i++];
      test.onload = ()=>{ el.src = url; };
      test.onerror = attempt;
      test.src = url;
    }
    attempt();
  }
  tryOverride('opt1','opt1'); tryOverride('opt2','opt2'); tryOverride('opt3','opt3'); tryOverride('opt4','opt4');

  const confetti=document.getElementById('confetti'); function fireConfetti(n=80){ for(let i=0;i<n;i++){ const p=document.createElement('div'); p.className='piece'; p.style.left=Math.random()*100+'%'; p.style.background=['#ffd24d','#ff7aa2','#7dd3fc','#b1f0dc','#fca5a5'][i%5]; const sx=(Math.random()*100-50)+'vw', ex=(Math.random()*100-50)+'vw'; p.style.setProperty('--sx',sx); p.style.setProperty('--ex',ex); p.style.animationDelay=(Math.random()*300)+'ms'; confetti.appendChild(p); setTimeout(()=>p.remove(), 2000); } }
})();
</script>
</body>
</html>